<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>RunDo by PPartisan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">RunDo</h1>
      <h2 class="project-tagline">Adds Undo/Redo functionality to editable text fields in Android.</h2>
      <a href="https://github.com/PPartisan/RunDo" class="btn">View on GitHub</a>
      <a href="https://github.com/PPartisan/RunDo/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/PPartisan/RunDo/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="rundo" class="anchor" href="#rundo" aria-hidden="true"><span class="octicon octicon-link"></span></a>RunDo</h1>

<p><img src="http://oi62.tinypic.com/s49utw.jpg" alt="Banner Image"></p>

<p><strong>RunDo</strong> allows developers to add Undo/Redo functionality to editable text fields in Android.  </p>

<p>This library aims to counteract some of the performance problems that can occur when working with large text blocks in Android in the following ways:</p>

<ul>
<li>Text is only saved to memory when the user stops typing. The bulk of code is only run when required, rather than updating with every key stroke.</li>
<li>Only text that has changed between saves is committed to memory, rather than saving all text present in the widget.</li>
<li>Only short, altered sections of text are inserted whenever an <code>undo()</code> or <code>redo()</code> method is called, and text fields are updated intelligently based on whether old text is to be added to, deleted from or replaced. This can drastically increase performance on older hardware, as calling <code>setText()</code> with large volumes of text can cause UI freezes.</li>
</ul>

<h2>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span class="octicon octicon-link"></span></a>ChangeLog</h2>

<h4>
<a id="view-changelog" class="anchor" href="#view-changelog" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="https://github.com/PPartisan/RunDo/releases/" title="Changelogs">View Changelog</a>
</h4>

<p>Current version is <code>v0.2</code></p>

<h2>
<a id="implementation" class="anchor" href="#implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Implementation</h2>

<h4>
<a id="gradle-dependency" class="anchor" href="#gradle-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gradle Dependency</h4>

<h5>
<a id="jcenter" class="anchor" href="#jcenter" aria-hidden="true"><span class="octicon octicon-link"></span></a>jcenter()</h5>

<p>Add the following to your module's <code>build.gradle</code> file:</p>

<pre><code>dependencies {
    compile 'com.werdpressed.partisan:rundo:0.2'
}
</code></pre>

<h5>
<a id="maven" class="anchor" href="#maven" aria-hidden="true"><span class="octicon octicon-link"></span></a>maven</h5>

<p>If you experience issues, add the following in addition to the dependency above:</p>

<pre><code>repositories {
    maven {
        url 'https://dl.bintray.com/ppartisan/maven/'
    }
}
</code></pre>

<h4>
<a id="instantiation" class="anchor" href="#instantiation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instantiation</h4>

<p>As the class extends <code>android.app.Fragment</code>, it requires <code>FragmentManager</code></p>

<pre><code>RunDoMixer mRunDoMixer;
//...
mRunDoMixer = (RunDoMixer) getFragmentManager().findFragmentByTag(RunDoMixer.RUNDO_MIXER_TAG);

if (mRunDoMixer == null) {
   testEditText = (EditText) findViewById(R.id.test_edit_text);
   mRunDoMixer = RunDoMixer.newInstance(testEditText.getId(), 0, 0);
   getFragmentManager()
       .beginTransaction()
       .add(mRunDoMixer, RunDoMixer.RUNDO_MIXER_TAG)
       .commit();
}
</code></pre>

<p><strong>Note:</strong> <em>Since</em> <code>v0.2</code><em>,</em> <code>newInstance(int editTextResourceId)</code> <em>can be used as shorthand for</em> <code>newInstance(editTextResourceId, 0, 0)</code><em>, to use default</em> <code>countdown</code> <em>and</em> <code>arraySize</code> <em>values.</em></p>

<p>The <code>newInstance()</code> method takes three paramters, all <code>int</code> values. The first is the <code>id</code> of either an <code>EditText</code> object, or the <code>id</code> of an object of a class that inherits from <code>EditText</code>. It is possible to pass <code>0</code> and later assign something suitable with <code>setEditText(Object object)</code>.</p>

<p>The other two parameters are optional. The first sets the countdown timer, in milliseconds, and determines how long  the system will wait from the last keypress before saving any altered text to the Undo queue. A value of less than one will revert to the default value of two seconds. The final parameter specifies the maximum size of the Undo and Redo queues before old entries are deleted. The default size is ten.</p>

<h4>
<a id="calling-undoredo" class="anchor" href="#calling-undoredo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Calling Undo/Redo</h4>

<p>To call Undo or Redo, use the <code>undo()</code> and <code>redo()</code> methods on the <code>RunDoMixer</code> object:</p>

<pre><code>mRunDoMixer.undo();
mRunDoMixer.redo();
</code></pre>

<p>For example:</p>

<pre><code>@Override
public void onClick(View v) {
    int id = v.getId();
    switch (id) {
        case R.id.undo_button:
            mRunDoMixer.undo();
            break;
        case R.id.redo_button:
            mRunDoMixer.redo();
            break;
    }

}
</code></pre>

<h4>
<a id="visual-feedback" class="anchor" href="#visual-feedback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Visual Feedback</h4>

<p><img src="http://oi59.tinypic.com/2v9u81e.jpg" alt="Undo Empty Feedback"></p>

<p>A <code>Toast</code> notification will appear to let the user know that they have reached the end of the Undo/Redo queue. This will either occur if they are at one extreme end of a full queue, or if the next entry is <code>null</code>.</p>

<p>To deactivate this feature, or change the message, use <code>setUndoQueueEmptyMessage(boolean condition, String message)</code> and <code>setRedoQueueEmptyMessage(coolean condition, String message)</code>. Setting <code>condition</code> to <code>false</code> will deactivate these notifications entirely, whilst any non-<code>null</code> text in the second argument will override the default message.</p>

<h4>
<a id="hardware-keyboard-shortcuts" class="anchor" href="#hardware-keyboard-shortcuts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hardware Keyboard Shortcuts</h4>

<p>By default, the follwing shortcuts are ennabled for hardware keyboard users:</p>

<ul>
<li>
<code>Ctrl + Z</code> for Undo</li>
<li>
<code>Ctrl + Y</code> for Redo</li>
</ul>

<p>Deactivate with <code>setKeyboardShortcuts(false)</code>.</p>

<h4>
<a id="clearing-queues" class="anchor" href="#clearing-queues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clearing Queues</h4>

<p>To clear all Undo and Redo queues, use <code>clearAllQueues()</code></p>

<h4>
<a id="callbacks" class="anchor" href="#callbacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Callbacks</h4>

<p>To receive a callback whenever <code>undo()</code> or <code>redo()</code> is called, have your class implement <code>RunDoMixer.UndoRedoCallbacks</code>. This will provide the following methods:</p>

<pre><code>@Override
public void undoCalled() {
}

@Override
public void redoCalled() {
}
</code></pre>

<h2>
<a id="other-extras" class="anchor" href="#other-extras" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other Extras...</h2>

<p><strong>RunDo</strong> relies heavily on a custom <code>String</code> comparison class called <code>SubtractStrings</code>. <code>SubtractStrings</code> compares two <code>String</code> objects, and returns data regarding:</p>

<ul>
<li>The points where the two strings first and last deviate from each other.</li>
<li>The <code>subString</code> from both the old text and new text, if one replaced a section of text in the other.</li>
<li>Options to return values in respect to the larger of the two strings, or in respect to the "new" text in relation to the "old" text.</li>
</ul>

<p>This class may be useful in its own right for some projects.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/PPartisan/RunDo">RunDo</a> is maintained by <a href="https://github.com/PPartisan">PPartisan</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

